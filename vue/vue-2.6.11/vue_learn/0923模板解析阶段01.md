## HTML解析器

- 三个解析器（parseHTML, parseText, parseFilters）里面最主要的就是HTML解析器
  - HTML解析器负责解析出模板字符串有哪些内容，根据内容的不同载调用不同的解析器(parseText, parseFilters)解析


### HTML解析器内部运行流程
- 就是parseHTML, 在模板解析主线函数parse中调用了该函数，并传入两个参数template和options

- parseHTML参数options里面定义了四个钩子函数（start, end, chars, comment），这四个钩子函数负责把提取出来的内容生成对应的AST

- 把这4个钩子函数作为参数传给解析器parseHTML，当解析器解析出不同的内容时调用不同的钩子函数从而生成不同的AST
  - 1.当解析到开始标签时调用start函数生成元素类型的AST节点
  - 2.当解析到结束标签调用end函数
  - 3.当解析到文本调用chars函数生成文本类型的AST节点
  - 4.当遇到注释标签，调用comment函数生成注释类型AST节点


### 如何解析不同的内容
- 文本，例如```“难凉热血”```
- HTML注释，例如```<!-- 我是注释 -->```
- 条件注释，例如```<!-- [if !IE]> -->我是注释<!--< ![endif] -->```
- DOCTYPE，例如```<!DOCTYPE html>```
- 开始标签，例如```<div>```
- 结束标签，例如```</div>```

- 当解析到开始标签时，会调用4个钩子函数中的start函数，而start函数需要传递3个参数，分别是标签名tag、标签属性attrs、标签是否自闭合unary。标签名通过正则匹配的结果就可以拿到，即上面代码中的start[1]，而标签属性attrs以及标签是否自闭合unary需要进一步解析。



### 总结

- 一句话概括就是：一边解析不同的内容一边调用对应的钩子函数生成对应的AST节点，最终完成将整个模板字符串转化成AST
- 
- HTML解析器是如何解析用户所写的模板字符串中各种类型的内容的，把各种类型的解析方式都分别进行了介绍。

- 其次，介绍了在解析器内维护了一个栈，用来保证构建的AST节点层级与真正DOM层级一致